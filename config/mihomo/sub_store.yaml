# openclashé…ç½®
# å‡ºç«™ç­–ç•¥ï¼Œæ ¹æ®è‡ªå·±æƒ…å†µè°ƒæ•´æ¯ä¸ªç­–ç•¥é‡Œåˆ†ç»„æ’åºï¼Œå¢åˆ éƒ½å¯ä»¥ï¼Œæ¯”å¦‚æŠŠç¾å›½è‡ªåŠ¨æ”¾åˆ°ç¬¬ä¸€ä¸ªï¼Œæ¯”å¦‚åˆ é™¤é¦™æ¸¯æ•…è½¬ï¼Œæ³¨æ„åˆ«æ¼æ‰è¡¨æƒ…é€—å·ç­‰ã€‚
# å¦‚æœç›¸åº”åˆ†ç»„æ²¡æœ‰ç­›é€‰åˆ°å¯¹åº”çš„å›½å®¶ï¼Œè¯·æ ¹æ®è‡ªå·±èŠ‚ç‚¹åå­—è°ƒæ•´ç­›é€‰å…³é”®å­—ã€‚
# æ²¡æœ‰å†ä½¿ç”¨é”šç‚¹ï¼Œæ˜¯è€ƒè™‘å¾ˆå¤šæ–°æ‰‹ä¿®æ”¹éš¾åº¦ï¼Œè¿™æ ·æ–°æ‰‹ä¿®æ”¹æŸä¸ªåˆ†ç»„æ›´å®¹æ˜“äº›ã€‚
dns:
  enable: true
  cache-algorithm: arc
  listen: 0.0.0.0:7874
  ipv6: false
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16  # æ¨èä½¿ç”¨ IANA ä¿ç•™åœ°å€
  fake-ip-filter-mode: blacklist
  use-hosts: true
  # fake-ip-ttl: 1

  # Fake-IP è¿‡æ»¤åˆ—è¡¨
  fake-ip-filter:
    - '*.lan'
    - '*.local'
    - '*.localhost'
    - 'time.*.com'
    - 'time.*.gov'
    - 'time.*.edu.cn'
    - '*.msftncsi.com'
    - '*.msftconnecttest.com'
    - '*.apple.com'  # Apple è®¾å¤‡æ¿€æ´»éœ€è¦çœŸå® IP
    - 'ip6.fei613.dpdns.org'  #DDNS
    - 'ip6.fei613.cloudns.be' #DDNS

  # DNS ç­–ç•¥ï¼ˆå¯é€‰ï¼Œæ›´ç²¾ç¡®æ§åˆ¶)
  nameserver-policy:
    # å¹¿å‘Šå±è”½
    'geosite: category-ads-all':
      - 10.0.0.1
    # ç‰¹å®šåŸŸåä½¿ç”¨æŒ‡å®š DNS
    'geosite: cn, private':
      - https://dns.alidns.com/dns-query
      - https://doh.pub/dns-query
      
  # é»˜è®¤ nameserverï¼ˆç”¨äºè§£æ DoH æœåŠ¡å™¨åŸŸåï¼‰
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  
  # ä¸» nameserverï¼ˆæŒ‰è§„åˆ™åˆ†æµï¼‰
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  fallback:
    - tls://8.8.4.4
    - tls://1.1.1.1
  
  # ä»£ç†åŸŸåä½¿ç”¨çš„ DNS
  proxy-server-nameserver:
    - https://dns.google/dns-query
    - https://cloudflare-dns.com/dns-query
    
  # ç›´è¿åŸŸåä½¿ç”¨çš„ DNS
  direct-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
    
  # direct-nameserver-follow-policy: false
  
  fallback-filter:
    geoip: true
    geoip-code: CN
    geosite:
      - gfw
      - youtube
      - disney
      - netflix
      
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'
  
  # ç¼“å­˜è®¾ç½®
  # cache-size: 2048
  # cache-ttl-min: 600
  # cache-ttl-max: 86400
    
#+proxies:
#  - {name: ç›´è¿, type: direct}
+proxies:
  - {name: ECH-wk, type: socks5, server: '127.0.0.1', port: '30000' }
#  - {name: ECH-wk2, type: socks5, server: '127.0.0.1', port: '300001' }

# SOCKS5 ç¤ºä¾‹
#  - type: socks5
#    name: ECH-wk
#    server: 127.0.0.1  # SOCKS5 æœåŠ¡å™¨åœ°å€
#    port: 30000              # ç«¯å£å·
#    username: user123        # ç”¨æˆ·åï¼ˆå¯é€‰ï¼‰
#    password: pass123        # å¯†ç ï¼ˆå¯é€‰ï¼‰
#    skip-cert-verify: true   # è·³è¿‡è¯ä¹¦éªŒè¯ï¼ˆå¯é€‰ï¼‰
#    udp: true                # å¯ç”¨ UDPï¼ˆå¯é€‰ï¼‰

proxy-groups:
  - {name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, â™»ï¸ Smartæ™ºé€‰, ğŸƒ æé€Ÿæœºåœº, ğŸ“¶ å®˜æ–¹ä¼˜é€‰, ğŸ“¶ CMä¼˜é€‰, ğŸ†• SNIPèŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥éŸ©èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§ç›ŸèŠ‚ç‚¹, ğŸŸ ECHWK, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹]}
  - {name: â™»ï¸ Smartæ™ºé€‰, type: url-test, proxies: [ğŸ“¶ å®˜æ–¹ä¼˜é€‰, ğŸ“¶ CMä¼˜é€‰, ğŸ†• SNIPèŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥éŸ©èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§ç›ŸèŠ‚ç‚¹], tolerance: 20, interval: 300}
  - {name: ğŸ“¹ YouTube, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ Smartæ™ºé€‰, ğŸƒ æé€Ÿæœºåœº, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥éŸ©èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹]}
  - {name: ğŸ¥ NETFLIX, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸƒ æé€Ÿæœºåœº, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥éŸ©èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹]}
  - {name: ğŸ“¶ å®˜æ–¹ä¼˜é€‰, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(å®˜æ–¹|ç§»åŠ¨|ç”µä¿¡|è”é€š))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$"}
  - {name: ğŸ“¶ CMä¼˜é€‰, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(CMä¼˜é€‰))^((?!(ç§»åŠ¨|ç”µä¿¡|è”é€š)).)*$"}
  - {name: ğŸƒ æé€Ÿæœºåœº, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æé€Ÿ))^((?!(snio|snip)).)*$"} 
  - {name: ğŸ†• SNIPèŠ‚ç‚¹, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(SNIP|SNIPss|SNIP_by))^((?!(ç¾|US)).)*$"}  
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾|æé€Ÿ)).)*$"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥éŸ©èŠ‚ç‚¹, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ—¥|æ—¥æœ¬|éŸ©å›½|éŸ©|JP|KR(?i)Japan|Kora))^((?!(æ¸¯|å°|æ–°|ç¾|æé€Ÿ)).)*$"}
  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore))^((?!(æ¸¯|å°|éŸ©|æ—¥|ç¾|æé€Ÿ)).)*$"}
  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(ç¾|US|(?i)States|America))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°|æé€Ÿ)).)*$"}
  - {name: ğŸ‡ªğŸ‡º æ¬§ç›ŸèŠ‚ç‚¹, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(å¾·å›½|è‹±å›½|æ³¢å…°|æ³•å›½|è·å…°|èŠ¬å…°|è¥¿ç­ç‰™|æ¾³å¤§åˆ©äºš))^((?!(æ¸¯|æ—¥|éŸ©|ç¾|æ–°|æé€Ÿ)).)*$"}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(å°æ¹¾|å°(?i)Taiwan))^((?!(æ¸¯|æ—¥|éŸ©|ç¾|æ–°|æé€Ÿ)).)*$"}
  - {name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [DIRECT]}
  - {name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [REJECT]}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ¯ å…¨çƒç›´è¿]}
  - {name: ğŸŸ ECHWK, type: select, proxies: [ECH-wk]}
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥éŸ©èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹], tolerance: 20, interval: 300}
  - {name: ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, type: select, include-all: true}
  
# è§„åˆ™åŒ¹é…
rules:
  - RULE-SET,category-ads-all,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,private_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,private_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,directlite,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,apple_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,apple_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,cn_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,proxylite,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,youtube_domain,ğŸ“¹ YouTube
  - RULE-SET,netflix_domain,ğŸ¥ NETFLIX
  - RULE-SET,netflix_ip,ğŸ¥ NETFLIX
#  - RULE-SET,telegram_domain,ğŸ“¹ YouTube
#  - RULE-SET,ai,ğŸ¤– ChatGPT
  - RULE-SET,cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,geolocation-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# è§„åˆ™é›†
## typeï¼šå¯é€‰http/file/inline  behaviorï¼šå¯é€‰domain/ipcidr/classical formatï¼šå¯é€‰yaml/text/mrs
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
rule-providers: 
#  fakeipfilter_domain: {<<: *domain, url: "https://gh-proxy.com/https://raw.githubusercontent.com/wwqgtxx/clash-rules/release/fakeip-filter.mrs"}
  category-ads-all: { <<: *domain, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ads-all.mrs"}
  private_domain: { <<: *domain, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"}
  directlite: { <<: *class, url: "https://gh-proxy.com/https://raw.githubusercontent.com/xingxiu7175/qichiyuhub_rule/refs/heads/main/direct.list"}
  proxylite: { <<: *class, url: "https://gh-proxy.com/https://raw.githubusercontent.com/xingxiu7175/qichiyuhub_rule/refs/heads/main/proxy.list"}
#  ai: {  <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ai-!cn.mrs" }
  youtube_domain: { <<: *domain, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"}
  netflix_domain: { <<: *domain, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs"}
#  telegram_domain: { <<: *domain, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"}
  apple_domain: { <<: *domain, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple.mrs"}
  geolocation-!cn: { <<: *domain, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"}
  cn_domain: { <<: *domain, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"}
  private_ip: {<<: *ip, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs"}
  cn_ip: { <<: *ip, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"}
#  google_ip: { <<: *ip, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"}
  netflix_ip: { <<: *ip, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs"}
  apple_ip: {<<: *ip, url: "https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/apple.mrs"}
  
